!function(t){t.fn.date=function(){return this.each(function(){if(t(this).data("pikaday"))return t(this);var a=t(this).attr("type","text"),n=a.next(),e=a.data("format"),r=a.val(),i=r?moment(r).format(e):null;if(a.attr("placeholder",e),a.val(i),a.is("[readonly]"))return!1;a.on("change",function(){var t=a.val();t?n.val(moment(t,e).format("YYYY-MM-DD")):n.val("")});var o=new Pikaday({field:this,firstDay:1,format:e,i18n:a.data("i18n"),onSelect:function(t){n.val(moment(t).format("YYYY-MM-DD"))}});t(this).data("pikaday",o)})}}(jQuery),function(t){var a=function(a){var n=t(a),e=n.data("style"),r=n.data("api"),i=n.data("sortable"),o="table"==e?n.find(".structure-table tbody"):n.find(".structure-entries");return i===!1?!1:void o.sortable({helper:function(a,n){return n.children().each(function(){t(this).width(t(this).width())}),n.addClass("structure-sortable-helper")},update:function(){var a=[];t.each(t(this).sortable("toArray"),function(t,n){a.push(n.replace("structure-entry-",""))}),t.post(r,{ids:a},function(){app.content.reload()})}})};t.fn.structure=function(){return this.each(function(){if(t(this).data("structure"))return t(this);var n=new a(this);return t(this).data("structure",n),t(this)})}}(jQuery),function(t){t.fn.counter=function(){return this.each(function(){var a=t(this);if(a.data("counter"))return a;var n=a.parent(".field").find(".input"),e=t.trim(n.val()).length,r=n.data("max"),i=n.data("min");n.keyup(function(){e=t.trim(n.val()).length,a.text(e+(r?"/"+r:"")),r&&e>r||i&&i>e?a.addClass("outside-range"):a.removeClass("outside-range")}).trigger("keyup"),a.data("counter",!0)})}}(jQuery),function(t){t.fn.editor=function(){return this.each(function(){if(t(this).data("editor"))return t(this);var a=t(this),n=a.parent().find(".field-buttons");a.autosize(),n.find(".btn").on("click.editorButton",function(n){a.focus();var e=t(this);if(e.data("action"))app.modal.open(e.data("action"),window.location.href);else{var r=a.getSelection(),i=e.data("tpl"),o=e.data("text");r.length>0&&(o=r);var u=i.replace("{text}",o);a.insertAtCursor(u),a.trigger("autosize.resize")}return!1}),n.find("[data-editor-shortcut]").each(function(n,e){var r=t(this).data("editor-shortcut");a.bind("keydown",r,function(a){return t(e).trigger("click"),!1})}),a.data("editor",!0)})}}(jQuery);